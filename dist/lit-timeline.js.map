{"version":3,"file":"lit-timeline.js","sources":["../packages/lit-timeline/lit-timeline-region.js","../packages/lit-timeline/lit-timeline-track.js","../packages/lit-timeline/lit-timeline.js"],"sourcesContent":["import {LitElement, html, css} from 'lit-element';\n/**\n * @polymer\n * @extends HTMLElement\n */\nexport class LitTimelineRegion extends LitElement {\n  static get properties() {\n    return {\n      label: {\n        type: String,\n      },\n      status: {\n        type: String,\n      },\n      scale: {\n        type: Number,\n      },\n      trackWidth: {\n        type: Number,\n      },\n      hidden: {\n        type: Boolean,\n        value: false,\n      },\n      duration: {\n        type: Number,\n      },\n      startTime: {\n        type: String,\n      },\n      endTime: {\n        type: String,\n      },\n      detail: {\n        type: Object,\n      },\n      selected: {\n        type: Boolean,\n        reflect: true,\n      },\n      temporality: {\n        type: String,\n        reflect: true,\n      },\n      _initialState: {\n        type: Object,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.status = 'off';\n    this.scale = 100;\n    this.hidden = false;\n    this.selected = false;\n    this.temporality = 'past';\n\n    this._windowListener = this._onWindowResize.bind(this);\n  }\n\n  render() {\n    return html`\n      <div\n        class=\"container\"\n        label=\"${this.label}: ${this._formatTime(this.startTime)}-${this._formatTime(this.endTime)}\"\n      >\n        <div class=\"rux-region__segment rux-region__header rux-region__segment rux-region__header\">\n          <rux-status class=\"light-theme\" status=\"${this.status}\"></rux-status>\n          <div class=\"rux-region__label\">${this.label}</div>\n        </div>\n        <div class=\"rux-region__segment rux-region__time\">\n          <span class=\"rux-region__time__start-time\">${this._formatTime(this.startTime)}</span>\n          <span class=\"rux-region__time__end-time\">${this._formatTime(this.endTime)}</span>\n        </div>\n      </div>\n    `;\n  }\n\n  static get styles() {\n    return css`\n      :host {\n        position: absolute;\n        display: flex;\n        flex-direction: column;\n\n        font-size: 0.875rem;\n        top: 0;\n        background-color: var(--timelineRegionBackgroundColor, rgb(0, 36, 57));\n        color: var(--timelineRegionTextColor, rgb(255, 255, 255));\n        overflow: hidden;\n\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n\n        border: 1px solid var(--timelineRegionBorderColor, rgb(0, 90, 143));\n        /* transition: border 0.667s ease-in-out; */\n\n        box-sizing: border-box;\n        height: 60px;\n\n        z-index: 1;\n        /* background-color: red; */\n        filter: none;\n      }\n\n      :host([hidden]) {\n        /* filter: saturate(50%); */\n        background-color: #203246;\n        opacity: 0.8;\n        z-index: 0;\n        border-color: #203246;\n        /* display: none; */\n      }\n\n      *,\n      *:after,\n      *:before {\n        box-sizing: inherit;\n      }\n\n      .filtered {\n        opacity: 0.5;\n      }\n\n      /*\n        Placeholders for variable sized timelines\n        :host(.large) {\n        }\n        \n        :host(.medium) {\n        }\n        \n        :host(.small) {\n        }\n        \n        :host(.compact) {\n        }\n        */\n      :host(.current),\n      :host([temporality='present']) {\n        border: 1px solid #4dacff;\n\n        transition: border 0.267s ease-in-out;\n      }\n\n      :host([selected]) {\n        border: 1px solid var(--timelineRegionSelectedBorderColor, rgb(77, 172, 255));\n        background-color: var(--timelineRegionSelectedBackgroundColor, rgb(58, 129, 191));\n        color: var(--timelineRegionSelectedTextColor, rgb(255, 255, 255));\n        z-index: 1;\n      }\n\n      :host([temporality='past']) {\n        color: rgba(255, 255, 255, 0.5);\n        /* filter: brightness(85%); */\n      }\n\n      :host(.future),\n      :host([temporality='future']) {\n        border: 1px dotted var(--timelineRegionSelectedBorderColor, rgb(77, 172, 255));\n      }\n\n      .rux-region__segment {\n        display: flex;\n        align-items: center;\n        padding: 0 1em;\n        margin: 0;\n        height: 30px !important;\n        line-height: 1;\n      }\n\n      .rux-region__header {\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n\n        height: 50%;\n      }\n\n      :host .rux-region__label {\n        white-space: nowrap;\n        overflow: hidden;\n\n        text-overflow: ellipsis;\n      }\n      /* \n        placeholders for variant sizes\n        :host(.standard) .rux-region__label {\n        }\n        \n        :host(.medium) .rux-region__label {\n        } */\n\n      :host(.small) .rux-region__label {\n        width: 45px;\n      }\n\n      :host(.compact) .rux-region__label {\n        display: none;\n      }\n\n      .rux-region__header rux-status {\n        margin-right: 0.5rem;\n      }\n\n      :host .rux-region__time {\n        display: flex;\n        justify-content: flex-end;\n        align-items: center;\n\n        height: 50%;\n      }\n\n      /* \n        placeholder for variant sizes\n        :host(.standard) .rux-region__time {\n        }\n        \n        :host(.medium) .rux-region__time {\n          /* display: none; * /\n        } */\n\n      :host(.small) .rux-region__time {\n        display: none;\n      }\n\n      :host(.compact) .rux-region__time {\n        display: none;\n      }\n\n      .rux-region__time__end-time {\n        margin-left: 0.25rem;\n      }\n\n      .rux-region__time__end-time::before {\n        content: '-';\n        margin-right: 0.25rem;\n      }\n    `;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.addEventListener('update', this._windowListener);\n\n    window.addEventListener('resize', this._windowListener);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.removeEventListener('update', this._windowListener);\n\n    window.removeEventListener('resize');\n  }\n\n  firstUpdated() {\n    const now = new Date();\n    const today = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), 0, 0, 0).getTime();\n    const start = new Date(this.startTime).getTime();\n    const end = new Date(this.endTime).getTime();\n\n    this.trackWidth = this.parentElement.offsetWidth;\n\n    const left = ((start - today) * this.trackWidth) / this.duration;\n    const width = ((end - start) * this.trackWidth) / this.duration;\n\n    // set the initial values for each region\n    //\n    this._initialState = {\n      width: width,\n      left: left,\n      scale: this.scale,\n    };\n\n    this._updateRegion();\n  }\n\n  _onWindowResize() {\n    // console.log(\"window resize\");\n    this._setDefaultSize();\n  }\n\n  _getTime(time) {\n    return time;\n    /* return new Date(\n      time.getUTCFullYear(),\n      time.getUTCMonth(),\n      time.getUTCDate(),\n      time.getUTCHours(),\n      time.getUTCMinutes(),\n      time.getUTCSeconds()\n    ); */\n  }\n\n  _formatTime(time) {\n    if (isNaN(time)) return false;\n\n    return new Date(time).toLocaleTimeString(this.locale, {\n      hour12: false,\n    });\n  }\n\n  _getRegionWidth() {\n    return this._initialState.width * (this.scale / this._initialState.scale);\n  }\n\n  _getRegionLeft() {\n    return this._initialState.left * (this.scale / this._initialState.scale);\n  }\n\n  _resetSize() {\n    this.classList.remove('small', 'standard', 'compact');\n  }\n\n  _filterUpdated() {\n    if (this.filter.toLowerCase() === 'none') {\n      this.hidden = false;\n    } else if (this.filter.toLowerCase() !== this.status.toLowerCase()) {\n      this.hidden = true;\n    } else {\n      this.hidden = false;\n    }\n  }\n\n  _updateRegion() {\n    const _width = this._getRegionWidth();\n    const _left = this._getRegionLeft();\n\n    this.style.left = _left + 'px';\n    this.style.width = _width + 'px';\n\n    this._resetSize();\n    if (_width > 180) {\n      // this is a normal sized widget\n      this.classList.add('large');\n    } else if (_width < 180 && _width > 140) {\n      // this is a mid sized widget without its time element\n      this.classList.add('medium');\n    } else if (_width < 140 && _width > 40) {\n      // this is a small widget without time or label\n      this.classList.add('small');\n    } else if (_width < 40) {\n      // this is a small widget without time or label\n      this.classList.add('compact');\n    }\n  }\n}\ncustomElements.define('lit-timeline-region', LitTimelineRegion);\n","import {LitElement, html, css} from 'lit-element';\n// import '@polymer/polymer/lib/elements/dom-repeat.js';\n/* eslint-disable no-unused-vars */\nimport {LitTimelineRegion} from './lit-timeline-region.js';\n/* eslint-enable no-unused-vars */\n\n/**\n * @polymer\n * @extends HTMLElement\n */\nexport class LitTimelineTrack extends LitElement {\n  static get properties() {\n    return {\n      id: {\n        type: String,\n      },\n      index: {\n        type: Number,\n        reflect: true,\n      },\n      regions: {\n        type: Array,\n      },\n      scale: {\n        type: Number,\n      },\n      duration: {\n        type: Number,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n\n    this.id = 'RTT-' + Math.floor(Math.random() * 1000);\n    this._windowListener = this._onWindowResize.bind(this);\n  }\n\n  render() {\n    return html`\n      <div class=\"rux-timeline__track\">\n        <ol class=\"rux-timeline__regions\">\n          ${this.regions.map(\n      (region) => html`\n              <li>\n                <lit-timeline-region\n                  id=\"${region.id}\"\n                  class=\"rux-timeline-region rux-timeline-region--main\"\n                  label=\"${region.label}\"\n                  status=\"${region.status}\"\n                  startTime=\"${region.startTime}\"\n                  endTime=\"${region.endTime}\"\n                  detail=\"${region.detail}\"\n                  scale=\"${this.scale}\"\n                  duration=\"${this.duration}\"\n                >\n                </lit-timeline-region>\n              </li>\n            `\n  )}\n        </ol>\n      </div>\n    `;\n  }\n\n  static get styles() {\n    return css`\n      :host {\n        display: flex;\n        width: 100%;\n\n        flex-wrap: wrap;\n      }\n\n      :host([selected]) {\n        height: auto;\n      }\n\n      :host([selected]) .rux-timeline-region--main {\n        display: none;\n      }\n\n      .rux-timeline__track {\n        position: relative;\n        display: block;\n        height: 60px;\n        width: 100%;\n\n        box-sizing: border-box;\n        overflow: hidden;\n      }\n\n      *,\n      *:after,\n      *:before {\n        box-sizing: inherit;\n      }\n\n      .rux-timeline__track {\n        position: relative;\n      }\n\n      ol {\n        display: block;\n        list-style: none;\n        padding: 0;\n        margin: 0;\n      }\n    `;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.addEventListener('update', this._windowListener);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.removeEventListener('update', this._windowListener);\n  }\n\n  firstUpdated() {\n    this.trackWidth = this.shadowRoot.querySelectorAll('.rux-timeline__track')[0].offsetWidth;\n  }\n\n  _resetSelected() {\n    // reset any region that may be selected\n    this.shadowRoot.querySelectorAll('rux-timeline-region').forEach((region) => {\n      if (!this.selectedRegion) return;\n      if (region._id !== this.selectedRegion._id) {\n        region.removeAttribute('selected');\n      }\n    });\n  }\n\n  isReserved(region) {\n    return region.reserved;\n  }\n\n  _onClick(e) {\n    const _region = e.currentTarget;\n    // Still not thrilled with this solution, but this will assign\n    // either the model.pass or the subitem object to _model … a\n    // I believe this a side effect of having the expanded track\n    // be contained within a second loop to the composed track. I.e.,\n    // composed tracks have a single loop to add regions, expanded\n    // tracks have a loop to create the subtrack, then nested loop\n    // to create the reqions.\n    // const _model = e.model ? e.model.pass : e.subitem;\n\n    if (_region.hasAttribute('selected')) {\n      this._resetSelected();\n      this.selectedRegion = {};\n    } else {\n      this._resetSelected();\n      _region.setAttribute('selected', '');\n\n      const now = new Date();\n      const utcNow = new Date(\n          now.getUTCFullYear(),\n          now.getUTCMonth(),\n          now.getUTCDate(),\n          now.getUTCHours(),\n          now.getUTCMinutes(),\n          now.getUTCSeconds()\n      );\n\n      let temporality = 'past';\n\n      if (utcNow.getTime() > _region.startTime && utcNow.getTime() < _region.endTime) {\n        temporality = 'present';\n      } else if (utcNow.getTime() < _region.startTime) {\n        temporality = 'future';\n      }\n\n      this.selectedRegion = {\n        _id: _region._id,\n        label: _region.label,\n        status: _region.status,\n        startTime: _region.startTime,\n        endTime: _region.endTime,\n        detail: _region.detail,\n        durationMins: _region.durationMins,\n        temporality: temporality,\n      };\n    }\n  }\n\n  _regionChanged() {\n    this._resetSelected();\n  }\n\n  _onWindowResize() {\n    this.trackWidth = this.shadowRoot.querySelectorAll('.rux-timeline__track')[0].offsetWidth;\n  }\n}\ncustomElements.define('lit-timeline-track', LitTimelineTrack);\n","import {LitElement, html, css} from 'lit-element';\n// import '@polymer/polymer/lib/elements/dom-repeat.js';\n/* eslint-disable no-unused-vars */\nimport {LitTimelineTrack} from './lit-timeline-track.js';\nimport {LitTimelineRegion} from './lit-timeline-region.js';\n/* eslint-enable no-unused-vars */\n\n/**\n * @polymer\n * @extends HTMLElement\n */\nexport class LitTimeline extends LitElement {\n  static get properties() {\n    return {\n      duration: {\n        type: Number,\n      },\n      startTime: {\n        type: Date,\n      },\n      tracks: {\n        type: Array,\n      },\n      playheadControl: {\n        type: Boolean,\n      },\n      initialScale: {\n        type: Number,\n      },\n      _scale: {\n        type: Number,\n      },\n      timezone: {\n        type: String,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n\n    this.duration = 86400000;\n    this.startTime = null;\n    this.playheadControl = false;\n    this.initialScale = 100;\n    this._scale = 100;\n    this.timezone = 'UTC';\n\n    // bind scroll listener to scroll event\n    this._scrollListener = this._scroll.bind(this);\n\n    // debounce for request animation frame\n    this._last = 0;\n  }\n\n  render() {\n    return html`\n      <section class=\"rux-timeline__viewport\">\n        <div class=\"rux-timeline__viewport__labels\">\n          ${this.tracks.map(\n      (track, index) => html`\n              <div\n                id=\"label-${index}\"\n                label=\"${track.label}\"\n                index=\"${index}\"\n                class=\"rux-timeline__track__label-container\"\n              >\n                <div class=\"rux-timeline__track__label\">${track.label}</div>\n              </div>\n            `\n  )}\n        </div>\n\n        <div id=\"rux-timeline__viewport__track-container\">\n          <div id=\"rux-timeline__viewport__tracks\">\n            <div id=\"rux-timeline__tracks\">\n              ${this.tracks.map(\n      (track, index) => html`\n                  <lit-timeline-track\n                    aria-labelledby=\"label-${index}\"\n                    label=\"${track.label}\"\n                    index=\"${index}\"\n                    scale=\"${this._scale}\"\n                    duration=\"${this._duration}\"\n                    .regions=\"${track.regions}\"\n                  ></lit-timeline-track>\n                `\n  )}\n            </div>\n            <div id=\"rux-timeline__current-time\"></div>\n            <div id=\"rux-timeline__playhead\"></div>\n            <div id=\"rux-timeline__ruler\"></div>\n          </div>\n        </div>\n      </section>\n\n      <footer class=\"rux-timeline__footer\">Footer FPO</footer>\n    `;\n  }\n\n  static get styles() {\n    return css`\n      :host {\n        display: flex;\n        flex-direction: column;\n        flex-grow: 1;\n\n        width: 100%;\n        padding: 0;\n\n        box-sizing: border-box;\n        transform: translateZ(0);\n      }\n\n      *,\n      *:after,\n      *:before {\n        box-sizing: border-box;\n      }\n\n      .rux-timeline__header,\n      .rux-timeline__footer {\n        position: relative;\n\n        display: flex;\n        align-items: center;\n\n        padding: 0 1em;\n\n        background-color: var(--timelineHeaderBackgroundColor, rgb(32, 50, 70));\n\n        z-index: 10;\n      }\n\n      .rux-timeline__header {\n        padding: unset 1.25rem;\n        justify-content: center;\n      }\n\n      .rux-timeline__header h1 {\n        font-size: 1.25rem;\n        font-weight: 300;\n        margin-left: 0.5em;\n      }\n\n      .rux-timeline__header rux-slider {\n        margin-left: auto;\n        margin-right: 1rem;\n      }\n\n      /* the default .rux-button__icon expects you to be using .rux-button--large on the parent */\n      .rux-timeline__header .rux-button .rux-button__icon {\n        height: 1.1rem;\n        width: 1.1rem;\n        margin-left: -0.3125rem;\n      }\n\n      .rux-timeline__footer {\n        display: none;\n      }\n\n      lit-timeline-track {\n        /* height: 60px; */\n        margin: 2px 0;\n      }\n\n      lit-timeline-track {\n        background-color: var(--timelineTrackBackgroundColor, rgb(40, 63, 88));\n      }\n\n      #rux-timeline__ruler {\n        display: flex;\n        justify-content: space-between;\n        position: relative;\n        margin-top: auto;\n        color: var(--fontColor, rgb(255, 255, 255));\n\n        background-color: var(--timelineRulerBackgroundColor, rgb(32, 50, 70));\n        height: 2em;\n        width: 100%;\n\n        /* box-shadow: 0 -2px 6px rgba(0,0,0,0.2) */\n      }\n\n      #rux-timeline__ruler div {\n        font-size: 0.675rem;\n        /* top: 0; */\n        height: 20px;\n        width: 100%;\n        /* position: absolute; */\n        border-left: 1px solid rgba(255, 255, 255, 0.1);\n        padding-left: 0.25rem;\n\n        /* border: 1px solid red; */\n        /* padding: 0.35rem 0 0 0.35rem; */\n      }\n\n      #rux-timeline__playhead {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 100%;\n        width: 3px;\n        background-color: rgba(255, 255, 255, 0.4);\n        z-index: 100;\n        display: none;\n      }\n\n      #rux-timeline__current-time {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 100%;\n        width: 1px;\n        background-color: #5cb3ff;\n        z-index: 200;\n        display: none;\n      }\n      #rux-timeline__current-time::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: -6px;\n        height: 5px;\n        width: 13px;\n        background-color: #5cb3ff;\n      }\n\n      #rux-timeline__current-time::after {\n        content: '';\n        position: absolute;\n        top: 5px;\n        left: -6px;\n        height: 5px;\n        width: 13px;\n        border-color: #5cb3ff;\n\n        border-top: 6px solid #5cb3ff;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n      }\n\n      .rux-timeline__viewport {\n        position: relative;\n        display: flex;\n\n        justify-content: flex-start;\n        width: 100%;\n        z-index: 5;\n\n        overflow-y: hidden;\n      }\n\n      .rux-timeline__track__label-container {\n        width: 100%;\n        background-color: var(--timelineTrackLabelBackgroundColor, rgb(40, 63, 88));\n        font-size: 0.875rem;\n        display: flex;\n        justify-content: flex-start;\n        flex-wrap: wrap;\n\n        height: 60px;\n        margin: 2px 1px 2px 0;\n      }\n\n      .rux-timeline__track__subtracks {\n        width: 100%;\n        background-color: #203246;\n      }\n\n      .rux-timeline__track__label-container[selected] {\n        height: auto;\n      }\n\n      .rux-timeline__track__label-container[selected] .rux-timeline__track__subtracks {\n        display: block;\n      }\n\n      .rux-timeline__track__label--subtrack {\n        background-color: var(--colorTertiaryDarken2);\n        margin: 2px 0;\n      }\n\n      .rux-timeline__track__label--subtrack:last-of-type {\n        margin: 2px 0 0 0;\n      }\n\n      .rux-timeline__track__label {\n        width: 100%;\n\n        font-size: 0.875rem;\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        height: 60px;\n        padding: 0 0.9875rem;\n\n        flex-grow: 0;\n      }\n\n      .rux-timeline__viewport__labels {\n        flex-shrink: 0;\n        position: relative;\n        width: 12.875rem;\n        z-index: 200;\n        margin-right: 2px;\n      }\n\n      #rux-timeline__viewport__tracks {\n        height: auto;\n        position: relative;\n      }\n\n      #rux-timeline__tracks {\n        position: relative;\n      }\n\n      #rux-timeline__viewport__track-container {\n        position: relative;\n        overflow-y: hidden;\n        z-index: 0;\n        width: 100%;\n      }\n\n      .rux-timeline__filter {\n        list-style: none;\n        padding: 0;\n        margin: 0;\n      }\n    `;\n  }\n\n  firstUpdated() {\n    // get the playhead\n    this._playhead = this.shadowRoot.getElementById('rux-timeline__playhead');\n\n    // get the current time indicator\n    this._currentTime = this.shadowRoot.getElementById('rux-timeline__current-time');\n\n    // get the track container; this is the larger container for\n    // tracks, ruler, playhead and current time indicator\n    this._track = this.shadowRoot.getElementById('rux-timeline__viewport__track-container');\n\n    // get the timeline ruler\n    this._ruler = this.shadowRoot.getElementById('rux-timeline__ruler');\n\n    // get the tracks container; this differs from the track_container\n    // in that it only contains the tracks.\n    this._tracks = this.shadowRoot.getElementById('rux-timeline__viewport__tracks');\n\n    this._setTics();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // hard coded min/max scale (for now)\n    this._minScale = 100;\n    this._maxScale = 500;\n\n    // if duration is less than 1000 then assume the data was in hours.\n    // NOTE: Refactor the underscore _duration is redundant at this point\n    // NOTE: a future enhancement would be to allow for some form of passing\n    // time in e.g. 12h for 12 hours\n    if (this.duration < 1000) {\n      this.duration = this.duration * 60 * 60 * 1000;\n    }\n    this._duration = this.duration;\n    this._durationHours = this._duration / 1000 / 60 / 60;\n\n    this._scale = this.initialScale;\n\n    if (this.playheadControl) {\n      this._playhead.style.display = 'block';\n    }\n\n    // if the browser supports the resizeObserver (currently Chrome 55+)\n    // use that to handle both window and css transitions of width. This\n    // provides a much smoother resize\n    if ('ResizeObserver' in window) {\n      this.resizeObserver = new ResizeObserver((entries) => {\n        entries.forEach(() => {\n          this._setParams();\n        });\n      });\n      this.resizeObserver.observe(this);\n\n      // otherwise use a mutation observer to handle resizing via CSS/JS\n      // and a window event listener to handle window resizing.\n    } else {\n      const _track = this.shadowRoot.getElementById('rux-timeline__viewport__track-container');\n\n      this.mustationObserver = new MutationObserver((mutationList) => {\n        mutationList.forEach(() => {\n          this._setParams();\n        });\n      });\n\n      this.mustationObserver.observe(_track, {\n        attributes: true,\n        childList: false,\n        subtree: true,\n      });\n    }\n\n    // Animate the playhead\n    this.currentTimeAnimator = window.requestAnimationFrame(this._updateCurrentTime.bind(this));\n\n    this.currentPlayheadAnimator = window.requestAnimationFrame(this._updatePlayhead.bind(this));\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this._track.removeEventListener('wheel', this._scrollListener);\n\n    window.cancelAnimationFrame(this.currentTimeAnimator);\n    window.cancelAnimationFrame(this.currentPlayheadAnimator);\n  }\n\n  _catchPlayhead() {\n    // if(this._playhead.offsetLeft > 1000) {\n    //   this.\n    // }\n  }\n\n  _dispatchPlayheadEvent(time) {\n    // TODO: use a while loop to have a more efficient sub-shadowDom inquisition\n    const _t = this.shadowRoot.querySelectorAll('rux-timeline-track');\n    _t.forEach((track) => {\n      const _r = track.shadowRoot.querySelectorAll('rux-timeline-region');\n\n      _r.forEach((region) => {\n        // handles setting a timeline region to a past state\n        if (time > region.startTime && time < region.endTime) {\n          region.temporality = 'present';\n        } else if (time < region.startTime) {\n          region.temporality = 'future';\n        } else if (time > region.endTime) {\n          region.temporality = 'past';\n        }\n      });\n    });\n  }\n\n  _updateCurrentTime(time) {\n    const now = new Date();\n    const utc = new Date(\n        now.getUTCFullYear(),\n        now.getUTCMonth(),\n        now.getUTCDate(),\n        now.getUTCHours(),\n        now.getUTCMinutes(),\n        now.getUTCSeconds()\n    );\n    const then = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), 0, 0, 0);\n\n    // time of today, like right now\n    const dif = utc.getTime() - then.getTime();\n    const loc = (dif * this._ruler.offsetWidth) / this._duration;\n\n    if (loc > this._ruler.offsetWidth) {\n      this._currentTime.style.display = 'none';\n    } else {\n      this._currentTime.style.display = 'block';\n      this._currentTime.style.left = loc + 'px';\n      this.currentTimeAnimator = window.requestAnimationFrame(this._updateCurrentTime.bind(this));\n    }\n\n    // throttle dispatching events to regions\n    if (!this._last || time - this._last >= 1 * 5000) {\n      this._last = time;\n      this._dispatchPlayheadEvent(utc);\n    }\n  }\n\n  _updatePlayhead() {\n    let loc = this._playhead.offsetLeft;\n\n    loc += 1 * (this._scale / 100);\n    if (loc >= this._tracks.offsetWidth) {\n      loc = 0;\n    }\n    this._playhead.style.left = loc + 'px';\n    this.currentPlayheadAnimator = window.requestAnimationFrame(this._updatePlayhead.bind(this));\n  }\n\n  _updateTimelineScale() {\n    // scale tracks container\n    const scale = `${Number(this._scale)}%`;\n    this._tracks.style.width = scale;\n    this._track.style.width = scale;\n  }\n\n  _setParams() {\n    this._updateTimelineScale();\n    // This is a very ugly way of targeting grandchildren form a parent\n    // but for demo it’ll have to do.\n    const _t = this.shadowRoot.querySelectorAll('rux-timeline-track');\n    _t.forEach((track) => {\n      track.dispatchEvent(new CustomEvent('update'));\n      const _r = track.shadowRoot.querySelectorAll('rux-timeline-region');\n\n      _r.forEach((region) => {\n        region.dispatchEvent(new CustomEvent('update'));\n      });\n    });\n  }\n\n  /*\n    TODO: Consider moving the ruler to its own component entirely and moving\n    all the tic/label logic there\n  */\n  _setTics() {\n    // TODO: Allow for a start time that isn’t midnight of the current day\n    const start = 0;\n\n    // loop through the duration set for the timeline\n    for (let i = start; i < this._durationHours; i++) {\n      // create a new tic\n      const tic = document.createElement('div');\n\n      // generate a readable time label\n      tic.innerHTML = `${i.toString().padStart(2, '0')}:00`;\n\n      // append to child\n      this._ruler.appendChild(tic);\n    }\n  }\n\n  /*\n    Mostly a dev feature, but maybe useful to end users.\n    Scroll the timeline with the mouse wheel\n  */\n  _scroll(e) {\n    if (e.altKey) {\n      let _delta = (this._scale += e.deltaY / 10);\n\n      if (_delta < this._minScale) {\n        _delta = this._minScale;\n      } else if (_delta > this._maxScale) {\n        _delta = this._maxScale;\n      }\n\n      this._scale = Math.floor(_delta);\n    } else {\n      e.currentTarget.scrollLeft += Math.floor(e.deltaY);\n    }\n  }\n}\ncustomElements.define('lit-timeline', LitTimeline);\n"],"names":["LitTimelineRegion","LitElement","properties","label","type","String","status","scale","Number","trackWidth","hidden","Boolean","value","duration","startTime","endTime","detail","Object","selected","reflect","temporality","_initialState","constructor","_windowListener","_onWindowResize","bind","render","html","_formatTime","styles","css","connectedCallback","addEventListener","window","disconnectedCallback","removeEventListener","firstUpdated","now","Date","today","getUTCFullYear","getUTCMonth","getUTCDate","getTime","start","end","parentElement","offsetWidth","left","width","_updateRegion","_setDefaultSize","_getTime","time","isNaN","toLocaleTimeString","locale","hour12","_getRegionWidth","_getRegionLeft","_resetSize","classList","remove","_filterUpdated","filter","toLowerCase","_width","_left","style","add","customElements","define","LitTimelineTrack","id","index","regions","Array","Math","floor","random","map","region","shadowRoot","querySelectorAll","_resetSelected","forEach","selectedRegion","_id","removeAttribute","isReserved","reserved","_onClick","e","_region","currentTarget","hasAttribute","setAttribute","utcNow","getUTCHours","getUTCMinutes","getUTCSeconds","durationMins","_regionChanged","LitTimeline","tracks","playheadControl","initialScale","_scale","timezone","_scrollListener","_scroll","_last","track","_duration","_playhead","getElementById","_currentTime","_track","_ruler","_tracks","_setTics","_minScale","_maxScale","_durationHours","display","resizeObserver","ResizeObserver","entries","_setParams","observe","mustationObserver","MutationObserver","mutationList","attributes","childList","subtree","currentTimeAnimator","requestAnimationFrame","_updateCurrentTime","currentPlayheadAnimator","_updatePlayhead","cancelAnimationFrame","_catchPlayhead","_dispatchPlayheadEvent","_t","_r","utc","then","dif","loc","offsetLeft","_updateTimelineScale","dispatchEvent","CustomEvent","i","tic","document","createElement","innerHTML","toString","padStart","appendChild","altKey","_delta","deltaY","scrollLeft"],"mappings":"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"}